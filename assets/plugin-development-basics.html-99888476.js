import{_ as n,V as s,W as a,a0 as e}from"./framework-c954d91f.js";const t={},p=e(`<h1 id="logseq-插件开发基础" tabindex="-1"><a class="header-anchor" href="#logseq-插件开发基础" aria-hidden="true">#</a> Logseq 插件开发基础</h1><h2 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建" aria-hidden="true">#</a> 环境搭建</h2><p>开发 Logseq 插件需要：</p><ul><li>Node.js</li><li>pnpm 或 npm</li><li>Logseq 应用</li></ul><h2 id="创建插件" tabindex="-1"><a class="header-anchor" href="#创建插件" aria-hidden="true">#</a> 创建插件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 使用官方脚手架</span>
npx @logseq/create-plugin my-plugin
<span class="token builtin class-name">cd</span> my-plugin

<span class="token comment"># 安装依赖</span>
<span class="token function">pnpm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="插件入口" tabindex="-1"><a class="header-anchor" href="#插件入口" aria-hidden="true">#</a> 插件入口</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;@logseq/libs&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Logseq 插件加载&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 注册命令</span>
  logseq<span class="token punctuation">.</span>Editor<span class="token punctuation">.</span><span class="token function">registerSlashCommand</span><span class="token punctuation">(</span><span class="token string">&#39;我的命令&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> logseq<span class="token punctuation">.</span>Editor<span class="token punctuation">.</span><span class="token function">insertAtEditingCursor</span><span class="token punctuation">(</span><span class="token string">&#39;Hello Logseq!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 注册快捷键</span>
  logseq<span class="token punctuation">.</span>App<span class="token punctuation">.</span><span class="token function">registerCommandPalette</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;my-command&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;我的命令&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">keybinding</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">binding</span><span class="token operator">:</span> <span class="token string">&#39;mod+shift+m&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;快捷键触发&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

logseq<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="开发调试" tabindex="-1"><a class="header-anchor" href="#开发调试" aria-hidden="true">#</a> 开发调试</h2><ol><li>运行 <code>pnpm dev</code> 启动开发模式</li><li>在 Logseq 中加载插件目录</li><li>修改代码后自动重新加载</li></ol><h2 id="常用-api" tabindex="-1"><a class="header-anchor" href="#常用-api" aria-hidden="true">#</a> 常用 API</h2><ul><li><code>logseq.Editor</code> - 编辑器操作</li><li><code>logseq.App</code> - 应用级操作</li><li><code>logseq.DB</code> - 数据库查询</li><li><code>logseq.UI</code> - 界面操作</li></ul><h2 id="发布插件" tabindex="-1"><a class="header-anchor" href="#发布插件" aria-hidden="true">#</a> 发布插件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 构建</span>
<span class="token function">pnpm</span> build

<span class="token comment"># 发布到 Logseq 市场</span>
<span class="token comment"># 提交 PR 到 https://github.com/logseq/marketplace</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>持续更新中...</p>`,15),i=[p];function o(c,l){return s(),a("div",null,i)}const d=n(t,[["render",o],["__file","plugin-development-basics.html.vue"]]);export{d as default};
