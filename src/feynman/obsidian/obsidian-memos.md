---
title: 闪念笔记 - 像发微博一样记录灵感
date: 2026-01-30
category:
  - Obsidian
tag:
  - 插件
  - 闪念
  - Flomo
---

# Obsidian 闪念笔记插件（obsidian-memos）

像发微博一样记录灵感，支持时间戳、标签分类和历史浏览，类似 Flomo 的轻量笔记体验。闪念以列表项形式存储在 Journal 文件中，与 Logseq、日记流兼容。

## 功能特点

- **快速捕获**：快捷键即可记录灵感，无需中断工作流
- **自动时间戳**：每条闪念可自动添加 `HH:mm` 时间戳
- **标签分类**：支持 `#tag`，可按标签筛选
- **快捷标签与聚合**：配置常用标签按钮，支持多标签聚合（如 `cy+jf+qt+gw|每日记账`，点击后显示带任意一个标签的闪念）
- **智能关键词**：内容包含「数字 + 关键词」时自动加标签（如「午餐13」→ `#cy`），可与记账场景配合
- **习惯打卡关键词**：内容包含关键词即加标签（不需数字），适合打卡
- **Journal 存储**：闪念写在 `journals/YYYY-MM-DD.md`，与日记、记账同源
- **外部写入自动刷新**：监听 vault 与 metadataCache，Alfred、Python 等外部写入日记后视图会自动刷新

## 安装方法

### 从 GitHub Release 安装（推荐）

1. 前往仓库 [Releases](https://github.com/fengshuzi/obsidian-memos/releases) 下载最新版本
2. 下载 `main.js`、`manifest.json`、`styles.css`
3. 在库中创建 `.obsidian/plugins/obsidian-memos/`
4. 将上述文件放入该目录
5. 重启 Obsidian 或重新加载插件，在设置 → 第三方插件中启用「闪念笔记」

### 手动构建

```bash
cd obsidian-memos
npm install
npm run build
# 将 dist/ 下文件复制到 .obsidian/plugins/obsidian-memos/
```

## 快速开始

### 1. 确认 Journal 目录

在设置中配置「Journal 文件夹」，默认为 `journals`。闪念会写入该目录下按日期命名的 md 文件（如 `journals/2026-01-30.md`）。

### 2. 记录闪念

- **快捷键**：`Cmd/Ctrl + Shift + M` 打开闪念输入弹窗
- **命令面板**：搜索「闪念笔记: 新建闪念」或「闪念笔记: 打开闪念视图」
- 在弹窗内输入内容后：
  - `Cmd/Ctrl + Enter`：发送
  - `Cmd/Ctrl + Shift + Enter`：发送并继续输入

![输入](./assets/memos-input.png)

### 3. 查看与筛选

- 打开左侧「闪念笔记」视图，按时间倒序浏览
- 使用顶部标签下拉或快捷标签按钮筛选（如「每日记账」「四象限」）
- 支持搜索框：按内容或标签关键词过滤

![快速筛选：按关键词与标签](./assets/memos-tag-filter.png)

![快速筛选：快捷标签与筛选结果](./assets/memos-quick-filter.png)

## 闪念格式

闪念以「列表项」形式存储在当日 Journal 文件中。

### 带时间戳（推荐）

```markdown
- 14:30 这是一条闪念
- 14:35 #想法 #灵感 记录一个点子
- 15:00 #jf 房租2366.85 闪念笔记 每日记账
```

解析规则：`- HH:mm` 开头的一行会被识别为一条闪念，后面的 `#tag` 会被提取为标签，其余为内容。

### 无时间戳（仅标签行）

若一行以 `- #tag ...` 开头，且其中任意一个标签属于「快捷标签」配置中的**任一组关键词**，也会被识别为闪念（用于与记账、习惯等聚合标签配合）：

```markdown
- #jf 房租2366.85 生活缴费
- #cy 午餐13 韭黄炒蛋
```

例如配置了 `cy+jf+qt+gw|每日记账` 时，带 `#jf`、`#cy`、`#qt`、`#gw` 中任意一个的这类行都会被识别并出现在「每日记账」筛选项下。

## 快捷标签与聚合标签

在设置 → 「快捷标签」中配置，格式为逗号分隔的若干项，每项格式如下：

- **单标签**：`关键词` 或 `关键词|显示名`  
  例如：`工作`、`p1|重要且紧急`
- **多标签聚合**：`关键词1+关键词2+关键词3|显示名`  
  点击该按钮时，会筛选出**带有其中任意一个标签**的闪念。

示例配置：

```text
今天也要用心过生活,p1|重要且紧急,cy+jf+qt+gw|每日记账,工作,sp+reading|习惯打卡
```

- `cy+jf+qt+gw|每日记账`：点击「每日记账」时，显示带 `#cy`、`#jf`、`#qt`、`#gw` 任一的闪念（与记账插件关键词一致时，可统一在闪念里记流水，在记账插件里看统计）。

## 智能关键词（记账识别）

在设置中配置 JSON，格式为：`{"标签": ["关键词1", "关键词2"]}`。  
当闪念**内容**中包含「数字 + 任一关键词」时，会自动为该条闪念加上对应标签。

示例：`{"cy": ["午餐","早餐","咖啡"], "jf": ["房租","水电"]}`  
输入「午餐13 韭黄炒蛋」保存后，会自动带上 `#cy`。

## 习惯打卡关键词

同样为 JSON 配置，但**不需要数字**，内容里出现关键词即加对应标签，适合打卡类闪念（如「深蹲50个」→ `#sp`）。

## 设置选项摘要

| 设置项 | 说明 |
|--------|------|
| Journal 文件夹 | 闪念存储目录，默认 `journals` |
| 日期格式 | 文件名日期，默认 `YYYY-MM-DD` |
| 时间格式 | 时间戳格式，默认 `HH:mm` |
| 快捷标签 | 按钮与聚合标签，见上文格式 |
| 智能关键词 | 数字+关键词 → 自动标签（记账） |
| 习惯打卡关键词 | 关键词 → 自动标签（打卡） |
| 每页显示数量 | 列表分页条数 |
| 提交后保持弹窗打开 | 方便连续记录 |
| 启动时打开闪念 | 是否默认打开闪念视图 |

![设置界面](./assets/memos-settings.png)

## 与记账插件配合

- 闪念笔记与记账类插件可共用同一批 Journal 文件（如 `journals/`）。
- 在闪念里用 `#cy`、`#jf`、`#gw` 等写流水（如 `- 14:00 #jf 房租2366.85`），用「每日记账」聚合标签在闪念里查看；记账插件从同一文件中解析金额与分类做统计。
- 两边的关键词建议一致（如记账里用 `jf`=生活缴费，闪念里也用 `#jf`），这样一条记录既可当闪念浏览，也可被记账统计。

## 外部修改自动刷新

当 Journal 被 **Alfred、Python 脚本、Quick Add** 等外部工具修改时，插件通过「vault 事件 + metadataCache.changed」双监听，在检测到目标文件变更后自动刷新视图，无需定时轮询。详见插件 README 中的「插件开发参考：监听文件变化并自动刷新视图」。

## 常见问题

**Q: 带 `#jf` 的记账行为什么在「每日记账」里看不到？**  
A: 确保该行被识别为闪念：要么是 `- HH:mm #jf ...` 格式，要么是 `- #jf ...` 且 `jf` 属于某个快捷标签的**整组关键词**（如 `cy+jf+qt+gw|每日记账` 里的 `jf`）。若之前不显示，多为只匹配了聚合里的第一个关键词，已修复为按整组关键词识别。

**Q: 闪念存在哪个文件？**  
A: 存在「Journal 文件夹」下、按「日期格式」命名的 md 文件中，例如 `journals/2026-01-30.md`。

**Q: 如何修改默认标签？**  
A: 在设置 → 「默认标签」中填写，新建闪念时会自动带上这些标签。

## 开发

```bash
npm install
npm run dev      # 开发模式
npm run build    # 构建
npm run release  # 发布到 GitHub
```

## 许可证

MIT License
